import{r as s,q as te,p as ae,s as le,o as se,v as oe,d as m,e as d,f as c,h as i,i as a,w as o,b as f,m as R,t as U,j as I,K as j,F as M,k as N,n as y}from"./index-9b6dcbe1.js";import{h as q}from"./moment-fbc5633a.js";const ne={class:"grid"},re={class:"col-12"},ie={class:"my-2"},ue={class:"flex flex-column md:flex-row md:justify-between md:align-items-center"},de=i("h5",{class:"m-0"},"Banner pictures ",-1),ce={class:"block mt-2 md:mt-0 p-input-icon-left"},me=i("i",{class:"pi pi-search"},null,-1),pe=["src"],ve=i("template",null,[i("div")],-1),ge={class:"flex space-x-5"},_e=["src"],he=["src"],be={key:0,class:"mt-1 mb-5 text-red-500"},fe=["src"],ye=["src"],we={key:0,class:"mt-1 mb-5 text-red-500"},De={setup(ke){const v=s(!1),g=s(!1);te();const T=ae(),P=s(!0),F=s(null),Y=s(null),E=s(null),w=s({});s(!1);const h=s(""),k=s([]),S=s({}),x=s({}),u=s(""),p=s([]),$=l=>{console.log(l.files[0]),p.value="",p.value=l.files,h.value=l.files,console.log(h.value);for(let e=0;e<p.value.length;e++)k.value.push(URL.createObjectURL(p.value[e]));console.log(k.value)},O=()=>{},z=()=>{const l=new FormData;for(let e=0;e<p.value.length;e++)l.append("images[]",p.value[e]);f.post("/api/banners/create",l).then(e=>{v.value=!v.value,C(),console.log(S.value),T.add({severity:"success",summary:"Successful",detail:"banner Created",life:3e3})}).catch(e=>{u.value=e.response.data.errors,console.log(u.value)})};le(()=>{J()});const C=()=>{f.get("/api/banners").then(l=>{P.value=!1,F.value=l.data.banners,console.log(F.value)})},A=l=>{console.log(l);const e=new FormData;for(let n=0;n<p.value.length;n++)e.append("images[]",p.value[n]);f.post(`/api/banners/${l}/update`,e).then(n=>{C(),T.add({severity:"success",summary:"Successful",detail:"update banner",life:3e3}),g.value=!g.value}).catch(n=>{u.value=n.response.data.errors,console.log(u.value)})};se(()=>{C()});const K=l=>{u.value=s({}),g.value=!g.value,f.get(`/api/banners/${l}`).then(e=>{console.log(e.data),console.log(l),x.value=e.data.banner,console.log(x.value)})},G=()=>{u.value=s({}),v.value=!v.value},H=l=>{f.delete(`/api/banners/${l}/delete`).then(e=>{console.log(e.data),C(),T.add({severity:"success",summary:"Successful",detail:"banner deleted",life:3e3})})},J=()=>{w.value={global:{value:null,matchMode:oe.CONTAINS}}};return(l,e)=>{const n=m("Button"),Q=m("Toolbar"),W=m("Toast"),X=m("InputText"),_=m("Column"),Z=m("DataTable"),B=m("FileUpload"),V=m("Dialog"),ee=m("va-card");return d(),c("div",ne,[i("div",re,[a(ee,{class:"card"},{default:o(()=>[a(Q,{class:"mb-4"},{start:o(()=>[i("div",ie,[a(n,{onClick:e[0]||(e[0]=t=>G()),label:"New",icon:"pi pi-plus",class:"new"})])]),_:1}),a(W),a(Z,{ref_key:"dt",ref:E,selection:Y.value,"onUpdate:selection":e[2]||(e[2]=t=>Y.value=t),value:F.value,loading:P.value,"data-key":"id",paginator:!0,rows:10,filters:w.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:o(()=>[i("div",ue,[de,i("span",ce,[me,a(X,{modelValue:w.value.global.value,"onUpdate:modelValue":e[1]||(e[1]=t=>w.value.global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),default:o(()=>[a(_,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(_,{field:"images",header:"Images",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(t=>{var r;return[i("img",{src:(r=t.data.media[0])==null?void 0:r.original_url},null,8,pe)]}),_:1}),a(_,{field:"create time",header:"Create time",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(t=>[R(U(I(q)(t.data.created_at).format("DD-MM-YYYY")),1)]),_:1}),a(_,{field:"updated time",header:"Updated time",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(t=>[R(U(I(q)(t.data.updated_at).format(" DD-MM-YYYY")),1)]),_:1}),a(_,{"header-style":"min-width:10rem;"},{default:o(()=>[ve]),_:1}),a(_,{"header-style":"min-width:10rem;"},{body:o(t=>[i("div",ge,[a(n,{icon:"pi pi-pencil",class:j(["p-button-rounded mr-2","p-button-danger"]),onClick:r=>K(t.data.id)},null,8,["onClick"]),a(n,{icon:"pi pi-trash",class:j(["delete mr-2",t.data.status==0?"p-button-success":"p-button-danger"]),onClick:r=>H(t.data.id)},null,8,["class","onClick"])])]),_:1})]),_:1},8,["selection","value","loading","filters"]),a(V,{visible:v.value,"onUpdate:visible":e[4]||(e[4]=t=>v.value=t),style:{width:"650px"},header:"Create banner",modal:!0},{default:o(()=>{var t;return[i("div",null,[a(B,{id:"password",onUploader:$,accept:"image/*",required:"true",multiple:!1,"custom-upload":!0,autofocus:""},{empty:o(()=>{var r,b,D;return[h.value!=""?(d(!0),c(M,{key:0},N(k.value,L=>(d(),c("img",{src:L,class:"w-[200px] h-[90px] mb-3"},null,8,_e))),256)):(b=(r=S.value)==null?void 0:r.media)!=null&&b.length?(d(!0),c(M,{key:1},N((D=S.value)==null?void 0:D.media,L=>(d(),c("img",{src:L.original_url,class:"w-[200px] h-[90px]"},null,8,he))),256)):y("",!0)]}),_:1}),(t=u.value)!=null&&t.images?(d(),c("div",be,U(u.value.images[0]),1)):y("",!0),a(n,{onClick:e[3]||(e[3]=r=>z()),type:"submit",label:"Submit",class:"mt-3"})])]}),_:1},8,["visible"]),a(V,{visible:g.value,"onUpdate:visible":e[6]||(e[6]=t=>g.value=t),style:{width:"650px"},header:"update banner",modal:!0},{default:o(()=>{var t;return[i("div",null,[a(B,{onChange:O,id:"password",onUploader:$,accept:"image/*",required:"true",multiple:!1,"custom-upload":!0,autofocus:""},{empty:o(()=>{var r,b;return[h.value.value!=""?(d(!0),c(M,{key:0},N(k.value,D=>(d(),c("img",{src:D,class:"w-[200px] h-[90px] mb-3"},null,8,fe))),256)):y("",!0),h.value==""?(d(),c("img",{key:1,src:(b=(r=x.value.pictures)==null?void 0:r.photos[0])==null?void 0:b.original_url,class:"w-[200px] h-[90px] mb-3"},null,8,ye)):y("",!0)]}),_:1}),(t=u.value)!=null&&t.images?(d(),c("div",we,U(u.value.images[0]),1)):y("",!0),a(n,{onClick:e[5]||(e[5]=r=>A(x.value.id)),type:"submit",label:"Submit",class:"mt-3"})])]}),_:1},8,["visible"])]),_:1})])])}}};export{De as default};
