import{p as G,r as n,q as $,H,d,e as v,C as M,w as B,h as u,L as P,i as _,f as h,t as V,n as y,k as I,F as j,b as p}from"./index-9b6dcbe1.js";const J={class:"flex justify-center"},K=["onSubmit"],Q={class:"w-full flex justify-between"},W=u("h2",{class:"text-xl font-bold"}," Create Offer ",-1),X={class:""},Y=u("label",{for:"password"},"Title ",-1),Z={key:0,class:"mt-1 mb-5 text-red-500"},ee={class:""},ae=u("label",{for:"password"},"Price ",-1),te={key:0,class:"mt-1 mb-5 text-red-500"},le=["src"],se=["src"],oe={key:0,class:"mt-1 mb-5 text-red-500"},ue={class:"flex mt-4"},ne={class:"flex items-center"},ce=u("label",{class:"mx-2"}," status ",-1),de={setup(re){const g=G(),a=n({number:"",title:"",status:!0,price:""}),m=n(0),S=n(""),x=n([]),o=n({}),t=n(""),D=$();n(0),n(0);const i=n([]),E=n([{name:"English",value:"English"},{name:"Arabic",value:"Arabic"},{name:"Azerbaijan",value:"Azerbaijan"},{name:"Georgia",value:"Georgia"},{name:"Russia",value:"Russia"},{name:"Turkey",value:"Turkey"}]),f=n("English"),L=l=>{console.log(l.files[0]),i.value=l.files,S.value=l.files;for(let e=0;e<i.value.length;e++)x.value.push(URL.createObjectURL(i.value[e]));console.log(x.value)},N=()=>{const l=new FormData;for(let e=0;e<i.value.length;e++)l.append("images[]",i.value[e]);l.append("title",a.value.title),a.value.status==!0&&(a.value.status=1,l.append("status",a.value.status)),a.value.status==!1&&(a.value.status=0,l.append("status",a.value.status)),l.append("price",a.value.price),l.append("lang",f.value),m.value?(p.defaults.headers.common.local=f.value,p.post(`/api/offers/${o.value.id}/update`,l).then(e=>{t.value=[],m.value=1,o.value=e.data.offer,g.add({severity:"success",summary:"Successful",detail:"Offer update",life:3e3})}).catch(e=>{t.value=e.response.data.errors,console.log(t.value)})):(p.defaults.headers.common.local=f.value,p.post("/api/offers/create",l).then(e=>{t.value=[],m.value=1,o.value=e.data.offer,console.log(o.value),g.add({severity:"success",summary:"Successful",detail:"Offer Created",life:3e3}),D.go(-1)}).catch(e=>{t.value=e.response.data.errors,console.log(t.value)}))};return H(f,async(l,e)=>{const r=new FormData;for(let s=0;s<i.value.length;s++)r.append("images[]",i.value[s]);r.append("number",a.value.number),r.append("title",a.value.title),r.append("status",a.value.status),r.append("price",a.value.price),m.value?(p.defaults.headers.common.local=f.value,p.post(`/api/flights/${o.value.id}/update`,r).then(s=>{t.value=[],m.value=1,o.value=s.data.flight,g.add({severity:"success",summary:"Successful",detail:"Flight Created",life:3e3})}).catch(s=>{t.value=s.response.data.errors,console.log(t.value)})):(p.defaults.headers.common.local=e,console.log(i.value[0]),p.post("/api/offers/create",r).then(s=>{t.value=[],m.value=1,o.value=s.data.offers,console.log(o.value),g.add({severity:"success",summary:"Successful",detail:"Flight Created",life:3e3})}).then(()=>{var s,b;console.log(m.value),a.value.title=((s=o.value)==null?void 0:s.title[l])==null?"":(b=o.value)==null?void 0:b.title[l],console.log(accommodition)}).catch(s=>{t.value=s.response.data.errors,console.log(t.value)}))}),(l,e)=>{const r=d("Dropdown"),s=d("InputText"),b=d("InputNumber"),R=d("FileUpload"),A=d("InputSwitch"),O=d("Button"),q=d("Toast"),z=d("va-card");return v(),M(z,{class:"card"},{default:B(()=>{var k,U,F;return[u("div",J,[u("form",{onSubmit:P(N,["prevent"]),class:"flex flex-col w-3/4 py-9"},[u("div",Q,[W,_(r,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=c=>f.value=c),editable:"",options:E.value,optionLabel:"name","option-value":"value",class:"w-36 mx-3"},null,8,["modelValue","options"])]),u("div",X,[Y,_(s,{modelValue:a.value.title,"onUpdate:modelValue":e[1]||(e[1]=c=>a.value.title=c),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(k=t.value)!=null&&k.title?(v(),h("div",Z,V(t.value.title[0]),1)):y("",!0)]),u("div",ee,[ae,_(b,{modelValue:a.value.price,"onUpdate:modelValue":e[2]||(e[2]=c=>a.value.price=c),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(U=t.value)!=null&&U.price?(v(),h("div",te,V(t.value.price[0]),1)):y("",!0)]),u("div",null,[_(R,{id:"password",onUploader:L,accept:"image/*",required:"true",multiple:!1,"custom-upload":!0,autofocus:""},{empty:B(()=>{var c,C,T;return[S.value.value!=""?(v(!0),h(j,{key:0},I(x.value,w=>(v(),h("img",{src:w,class:"w-[200px] h-[90px] mb-3"},null,8,le))),256)):(C=(c=o.value)==null?void 0:c.media)!=null&&C.length?(v(!0),h(j,{key:1},I((T=o.value)==null?void 0:T.media,w=>(v(),h("img",{src:w.original_url,class:"w-[200px] h-[90px] mb-3"},null,8,se))),256)):y("",!0)]}),_:1}),(F=t.value)!=null&&F.images?(v(),h("div",oe,V(t.value.images[0]),1)):y("",!0)]),u("div",ue,[u("div",ne,[ce,_(A,{modelValue:a.value.status,"onUpdate:modelValue":e[3]||(e[3]=c=>a.value.status=c)},null,8,["modelValue"])])]),_(O,{type:"submit",label:"Submit",class:"mt-3"})],40,K)]),_(q)]}),_:1})}}};export{de as default};
