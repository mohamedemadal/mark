import{p as ae,q as le,r as n,s as se,o as ie,v as oe,d as v,e as d,f as u,h as i,i as t,w as o,b as h,m as M,t as q,n as p,K as _}from"./index-9b6dcbe1.js";const ne={class:"grid"},de={class:"col-12"},ue=i("div",{class:"my-2"},null,-1),re={class:"flex flex-column md:flex-row md:justify-between md:align-items-center"},ce=i("h5",{class:"m-0"},"Manage guides",-1),me={class:"block mt-2 md:mt-0 p-input-icon-left"},ve=i("i",{class:"pi pi-search"},null,-1),pe={key:0},_e={key:1},fe={class:"m-auto text-center"},be={key:0,class:"pi pi-times-circle text-red-400 h-6"},he={key:1,class:"pi pi-check-circle text-green-500"},ge={key:0},ye={key:0},ke={key:1},we={class:"field mb-5"},Ce=i("label",{for:"first"},"first name ",-1),Ve={key:0,class:"p-invalid"},xe={class:"field mb-5"},Se=i("label",{for:"last"},"last name ",-1),Te={key:0,class:"p-invalid"},Ne={class:"field mb-5"},De=i("label",{for:"email",class:"mb-3"},"email ",-1),Ue={key:0,class:"p-invalid"},Me={class:"field mb-5"},qe=i("label",{for:"password",class:"mb-3"},"password ",-1),$e={key:0,class:"p-invalid"},Le={class:"field mb-5"},Oe=i("label",{for:"mobile",class:"mb-3"},"mobile",-1),Re={key:0,class:"p-invalid"},Ae={class:"m-auto"},Be={class:"flex align-items-center justify-content-center"},Ee=i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Fe={key:0},Ke={setup(Ie){const y=ae(),A=le(),$=n(null),k=n(!0),a=n({}),L=n(""),D=n(null),V=n(!1),w=n(!1),x=n(!1),B=n({}),S=n(null),O=n(null),T=n({}),r=n(!1),N=n({tourist_rating:Number,reviewable_id:"",type:1});n([{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}]),se(()=>{J()});const f=()=>{h.get("/api/guides").then(s=>{k.value=!1,D.value=s.data.guides,console.log(D.value)})},E=s=>{k.value=!0,h.post(`/api/guides/${s.id}/active`).then(l=>{f()})},F=s=>{k.value=!0,h.post(`/api/guides/${s.id}/inActive`).then(l=>{f()})},I=s=>{k.value=!0,h.post(`/api/guides/${s.id}/changeStatus`).then(l=>{f()})};ie(()=>{f()});const P=s=>{A.push({name:"guides-show",params:{id:s}})},K=()=>{V.value=!1,r.value=!1},Y=()=>{r.value=!0,!(!a.value.first_name||!a.value.last_name||!a.value.email||!a.value.mobile_number)&&(a.value.id?(h.post(`/api/users/${a.value.id}/update`,a.value).then(s=>{console.log(s.data),f(),y.add({severity:"success",summary:"Successful",detail:"user updated",life:3e3})}).catch(()=>{}),y.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})):h.post("/api/users/create",a.value).then(s=>{console.log(s.data),f(),y.add({severity:"success",summary:"Successful",detail:"user Created",life:3e3})}).catch(()=>{}),V.value=!1,a.value={})},j=s=>{switch(s.status){case 1:return"success";case-1:return"warning";case 0:return"danger";default:return null}},z=s=>{L.value=n(""),N.value.reviewable_id=s,w.value=!0},W=()=>{h.post("/api/rating/create-admin",N.value).then(s=>{f(),y.add({severity:"success",summary:"Successful",detail:"rate send",life:3e3}),w.value=!w.value}).catch(s=>{L.value=s.response.data.errors})},G=()=>{O.value.exportCSV()},H=()=>{$.value=$.value.filter(s=>!S.value.includes(s)),x.value=!1,S.value=null,y.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})},J=()=>{T.value={global:{value:null,matchMode:oe.CONTAINS}}};return(s,l)=>{const c=v("Button"),Q=v("Toolbar"),X=v("Toast"),g=v("InputText"),m=v("Column"),R=v("Rating"),Z=v("Tag"),ee=v("DataTable"),U=v("Dialog"),te=v("va-card");return d(),u("div",ne,[i("div",de,[t(te,{class:"card"},{default:o(()=>[t(Q,{class:"mb-4"},{start:o(()=>[ue]),end:o(()=>[t(c,{label:"Export",icon:"pi pi-upload",class:"new",onClick:l[0]||(l[0]=e=>G())})]),_:1}),t(X),t(ee,{ref_key:"dt",ref:O,selection:S.value,"onUpdate:selection":l[2]||(l[2]=e=>S.value=e),value:D.value,loading:k.value,"data-key":"id",paginator:!0,rows:10,filters:T.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:o(()=>[i("div",re,[ce,i("span",me,[ve,t(g,{modelValue:T.value.global.value,"onUpdate:modelValue":l[1]||(l[1]=e=>T.value.global.value=e),placeholder:"Search..."},null,8,["modelValue"])])])]),default:o(()=>[t(m,{"selection-mode":"multiple","header-style":"width: 3rem"}),t(m,{field:"name",header:"Name",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(e=>[M(q(e.data.name),1)]),_:1}),t(m,{field:"gender",header:"Gender",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(e=>[e.data.gender==1?(d(),u("span",pe," Men ")):(d(),u("span",_e," Women "))]),_:1}),t(m,{field:"email",header:"Email",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(e=>[M(q(e.data.email),1)]),_:1}),t(m,{field:"phone",header:"Phone",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(e=>[M(q(e.data.phone),1)]),_:1}),t(m,{field:"rate",header:"Rate",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(e=>[t(R,{onClick:b=>z(e.data.id),modelValue:e.data.admin_rating,cancel:!1},null,8,["onClick","modelValue"])]),_:1}),t(m,{field:"email_verified",header:"Email Verified",sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"m-auto"},{body:o(e=>{var b,C;return[i("div",fe,[((b=e.data)==null?void 0:b.email_verified)=="Not Yet"?(d(),u("i",be)):p("",!0),((C=e.data)==null?void 0:C.email_verified)!="Not Yet"?(d(),u("i",he)):p("",!0)])]}),_:1}),t(m,{field:"status",header:"Status",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(e=>[t(Z,{value:e.data.status==1?"Active":e.data.status==0?"In Active":"pending",severity:j(e.data)},null,8,["value","severity"])]),_:1}),t(m,{"header-style":"min-width:10rem;"},{body:o(e=>{var b;return[((b=e.data)==null?void 0:b.email_verified)!="Not Yet"?(d(),u("div",ge,[e.data.status==-1?(d(),u("div",ye,[t(c,{icon:"pi pi-times",class:_(["p-button-rounded mr-2","p-button-danger"]),onClick:C=>F(e.data)},null,8,["onClick"]),t(c,{icon:"pi pi-check",class:_(["p-button-rounded mr-2","p-button-success"]),onClick:C=>E(e.data)},null,8,["onClick"])])):(d(),u("div",ke,[t(c,{icon:e.data.status==0?"pi pi-check":"pi pi-times",class:_(["p-button-rounded mr-2",e.data.status==0?"p-button-success":"p-button-danger"]),onClick:C=>I(e.data)},null,8,["icon","class","onClick"])]))])):p("",!0)]}),_:1}),t(m,{"header-style":"min-width:10rem;"},{body:o(e=>[i("div",null,[t(c,{label:"show",class:_(["pop mr-2","p-button-danger"]),onClick:b=>P(e.data.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value","loading","filters"]),t(U,{visible:V.value,"onUpdate:visible":l[8]||(l[8]=e=>V.value=e),style:{width:"450px"},header:"users form",modal:!0,class:"p-fluid"},{footer:o(()=>[t(c,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:K}),t(c,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:Y})]),default:o(()=>[i("div",we,[Ce,t(g,{class:_(["mt-3",{"p-invalid":r.value&&!a.value.first_name}]),id:"first",modelValue:a.value.first_name,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.first_name=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),r.value&&!a.value.first_name?(d(),u("small",Ve,"First Name is required.")):p("",!0)]),i("div",xe,[Se,t(g,{class:_(["mt-3",{"p-invalid":r.value&&!a.value.last_name}]),id:"last",modelValue:a.value.last_name,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value.last_name=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),r.value&&!a.value.last_name?(d(),u("small",Te,"Last Name is required.")):p("",!0)]),i("div",Ne,[De,t(g,{class:_(["mt-3",{"p-invalid":r.value&&!a.value.email}]),id:"email",modelValue:a.value.email,"onUpdate:modelValue":l[5]||(l[5]=e=>a.value.email=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),r.value&&!a.value.email?(d(),u("small",Ue,"Email is required.")):p("",!0)]),i("div",Me,[qe,t(g,{class:_(["mt-3",{"p-invalid":r.value&&!a.value.password}]),id:"password",modelValue:a.value.password,"onUpdate:modelValue":l[6]||(l[6]=e=>a.value.password=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),r.value&&!a.value.password?(d(),u("small",$e,"password is required.")):p("",!0)]),i("div",Le,[Oe,t(g,{class:_(["mt-3",{"p-invalid":r.value&&!a.value.mobile_number}]),id:"mobile",modelValue:a.value.mobile_number,"onUpdate:modelValue":l[7]||(l[7]=e=>a.value.mobile_number=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),r.value&&!a.value.mobile_number?(d(),u("small",Re,"mobile is required.")):p("",!0)])]),_:1},8,["visible"]),t(U,{visible:w.value,"onUpdate:visible":l[10]||(l[10]=e=>w.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:o(()=>[t(c,{label:"send",icon:"pi pi-check",class:"m-auto",onClick:W})]),default:o(()=>[i("div",Ae,[t(R,{class:"m-auto",modelValue:N.value.tourist_rating,"onUpdate:modelValue":l[9]||(l[9]=e=>N.value.tourist_rating=e),stars:5,cancel:!1},null,8,["modelValue"])])]),_:1},8,["visible"]),t(U,{visible:x.value,"onUpdate:visible":l[12]||(l[12]=e=>x.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:o(()=>[t(c,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:l[11]||(l[11]=e=>x.value=!1)}),t(c,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:H})]),default:o(()=>[i("div",Be,[Ee,B.value?(d(),u("span",Fe,"Are you sure you want to delete the selected products?")):p("",!0)])]),_:1},8,["visible"])]),_:1})])])}}};export{Ke as default};
