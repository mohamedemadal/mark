import{p as z,r as d,H as F,d as u,e as p,f as r,h as l,i as a,w as _,t as f,n as y,j as L,b}from"./index-9b6dcbe1.js";import{s as M}from"./editor.esm-fdcfe090.js";const N={class:"grid"},E={class:"col-12 h-full"},I={class:"lg:w-[80%] w-[95%] mx-auto py-8"},R=l("div",null,[l("h2",{class:"text-2xl font-bold py-5"},"Reminding Users")],-1),A={class:"card w-full mx-auto py-4"},H=l("p",{class:"text-xl font-bold"},"Subject",-1),$={key:0,class:"mt-1 mb-1 text-red-500"},q={class:"card w-full mx-auto py-4"},G=l("p",{class:"text-xl font-bold"},"User Type",-1),J={class:"card flex justify-content-center"},K={key:0,class:"mt-1 mb-1 text-red-500"},O={class:"card w-full mx-auto py-4"},P=l("p",{class:"text-xl font-bold"},"Content",-1),Q={key:0,class:"mt-1 mb-1 text-red-500"},W={class:"card w-full mx-auto py-4"},X=l("p",{class:"text-xl font-bold"},"Attachment",-1),Y={class:"w-full py-4"},Z={class:"w-full text-center"},ee=l("p",null," The file must be less than 100 MB ",-1),te={class:"card flex justify-content-center"},ae={setup(le){const j=z(),v=d([]),i=d(!1),m=d(!1),e=d({body:"",subject:[],type:"",selected:[],attachment:""}),n=d("");d();const S=d([{name:"tourist",code:"2"},{name:"drivers",code:"0"},{name:"guides",code:"1"}]);F(()=>e.value.type,(s,t)=>{s==0&&(e.value.selected="",i.value=!i.value,b.get("/api/drivers").then(c=>{v.value=c.data.drivers})),s==1&&(e.value.selected="",i.value=!i.value,b.get("/api/guides").then(c=>{v.value=c.data.guides}))});const U=s=>{console.log(s.target.files[0].size),s.target.files[0].size/1e3<100?e.value.attachment=s.target.files[0]:m.value=!0,console.log(e.value.attachment)},k=()=>{const s=new FormData;s.append("body",e.value.body),e.value.selected!=""&&s.append("selected",e.value.selected),s.append("subject",e.value.subject),s.append("type",e.value.type),e.value.attachment&&s.append("attachment",e.value.attachment),b.post("/api/reminderEmail",s).then(t=>{console.log("asdasda"),j.add({severity:"success",summary:"Successful",detail:" Created  Successful",life:3e3})}).catch(t=>{n.value=t.response.data.errors})};return(s,t)=>{const c=u("Toast"),x=u("InputText"),C=u("Dropdown"),D=u("Button"),h=u("Dialog"),T=u("MultiSelect"),B=u("va-card");return p(),r("div",N,[l("div",E,[a(B,{class:"card m-auto"},{default:_(()=>{var g,w,V;return[a(c),l("div",I,[R,l("div",A,[H,a(x,{modelValue:e.value.subject,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.subject=o),type:"text",class:"w-full py-4"},null,8,["modelValue"]),(g=n.value)!=null&&g.subject?(p(),r("div",$,f(n.value.subject[0]),1)):y("",!0)]),l("div",q,[G,l("div",J,[a(C,{modelValue:e.value.type,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.type=o),options:S.value,"option-value":"code",optionLabel:"name",placeholder:"user type",class:"w-full py-1"},null,8,["modelValue","options"])]),(w=n.value)!=null&&w.type?(p(),r("div",K,f(n.value.type[0]),1)):y("",!0)]),l("div",O,[P,a(L(M),{modelValue:e.value.body,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.body=o),editorStyle:"height: 150px",class:"my-2"},null,8,["modelValue"]),(V=n.value)!=null&&V.body?(p(),r("div",Q,f(n.value.body[0]),1)):y("",!0)]),l("div",W,[X,l("div",Y,[a(x,{name:"file",ref:"file",onChange:U,maxFileSize:1,type:"file",class:"w-full"},null,512)])]),l("div",Z,[a(D,{onClick:t[3]||(t[3]=o=>k()),label:"Send",class:"mt-3 mx-auto lg:w-[10%]"})])]),a(h,{visible:m.value,"onUpdate:visible":t[4]||(t[4]=o=>m.value=o),modal:"",header:"Limitation",style:{width:"20rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:_(()=>[ee]),_:1},8,["visible"]),a(h,{visible:i.value,"onUpdate:visible":t[6]||(t[6]=o=>i.value=o),class:"w-[90%] lg:w-[50%]",header:"Select users",modal:!0},{default:_(()=>[l("div",te,[a(T,{modelValue:e.value.selected,"onUpdate:modelValue":t[5]||(t[5]=o=>e.value.selected=o),"option-value":"id",filter:"",options:v.value,optionLabel:"name",placeholder:"Select users",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"])]}),_:1})])])}}};export{ae as default};
