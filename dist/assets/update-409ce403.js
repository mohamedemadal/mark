import{q as A,p as M,r as l,u as P,H as G,U as H,o as K,b as h,d,e as i,C as O,w as B,h as n,L as Q,i as c,f as m,t as f,n as _,k as J,F as W,K as X,m as Y}from"./index-9b6dcbe1.js";import{r as Z,v as ee,p as ae,a as te}from"./filepond-plugin-image-preview.esm-229deca5.js";import{p as le}from"./filepond-plugin-file-encode.esm-b0bc8408.js";const se={class:"flex justify-center"},oe=["onSubmit"],ne={class:"pb-4 text-center va-text-bold"},ue=Y(" Update Flight "),ie={class:""},de=n("label",{for:"password"},"name ",-1),ce={key:0,class:"mt-1 mb-5 text-red-500"},me={class:""},re=n("label",{for:"password"},"link ",-1),pe={key:0,class:"mt-1 mb-5 text-red-500"},ve={class:""},_e=n("label",{for:"password"},"discount ",-1),ge={key:0,class:"mt-1 mb-5 text-red-500"},fe=["src"],he=["src"],be={key:0,class:"mt-1 mb-5 text-red-500"},Ve={setup(xe){A(),Z(le),ee(te,ae);const N=M(),t=l({name:"",link:"",discount:0});l(null);const b=l([]),S=P(),T=l(0),r=l(""),x=l(""),u=l({});l(0),l(0);const C=l([]),I=l([{name:"English",value:"gb"},{name:"Arabic",value:"sa"},{name:"Azerbaijan",value:"az"},{name:"Georgia",value:"ge"},{name:"Russia",value:"ru"},{name:"Turkey",value:"tr"}]),p=l("gb"),s=l(""),L=a=>{console.log(a.files[0]),C.value=a.files,r.value=a.files[0],x.value=URL.createObjectURL(r.value),console.log(r.value)},R=()=>{const a=new FormData;a.append("images",r.value),a.append("name",t.value.name),a.append("link",t.value.link),a.append("discount",t.value.discount),h.defaults.headers.common.local=p.value,h.post(`/api/flights/${u.value.id}/update`,a).then(e=>{s.value=[],T.value=1,u.value=e.data.flight,N.add({severity:"success",summary:"Successful",detail:"Flight Updated",life:3e3})}).catch(e=>{s.value=e.response.data.errors,console.log(s.value)})};return G(p,async(a,e)=>{var g,v;console.log(u.value),t.value.name=((g=u.value)==null?void 0:g.name[a])==null?"":(v=u.value)==null?void 0:v.name[a]}),H(()=>b.value),K(()=>{h.get(`/api/flights/${S.params.id}`).then(e=>{t.value.name=e.data.flight.name[p.value],t.value.link=e.data.flight.link,t.value.descount=e.data.flight.discount,u.value=e.data.flight,console.log(u.value),console.log(b.value)});const a=document.getElementsByClassName("hidImg");console.log(a[0])}),(a,e)=>{const g=d("Dropdown"),v=d("InputText"),D=d("InputNumber"),E=d("FileUpload"),$=d("Button"),j=d("Toast"),z=d("va-card");return i(),O(z,{class:"card"},{default:B(()=>{var k,y,w,V;return[n("div",se,[n("form",{onSubmit:Q(R,["prevent"]),class:"flex flex-col w-3/4 py-9"},[n("h2",ne,[ue,c(g,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o),editable:"",options:I.value,optionLabel:"name","option-value":"value",class:"w-36 mx-3 mx-10"},null,8,["modelValue","options"])]),n("div",ie,[de,c(v,{modelValue:t.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.name=o),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(k=s.value)!=null&&k.name?(i(),m("div",ce,f(s.value.name[0]),1)):_("",!0)]),n("div",me,[re,c(v,{modelValue:t.value.link,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.link=o),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(y=s.value)!=null&&y.link?(i(),m("div",pe,f(s.value.link[0]),1)):_("",!0)]),n("div",ve,[_e,c(D,{modelValue:t.value.discount,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.discount=o),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(w=s.value)!=null&&w.discount?(i(),m("div",ge,f(s.value.discount[0]),1)):_("",!0)]),n("div",null,[c(E,{id:"password",onUploader:L,accept:"image/*",required:"true",multiple:"true","custom-upload":!0,autofocus:"",class:X({"p-invalid":a.submitted})},{empty:B(()=>{var o,U,F;return[r.value!=""?(i(),m("img",{key:0,src:x.value,class:"w-[200px] h-[90px]"},null,8,fe)):(U=(o=u.value)==null?void 0:o.media)!=null&&U.length?(i(!0),m(W,{key:1},J((F=u.value)==null?void 0:F.media,q=>(i(),m("img",{src:q.original_url,class:"w-[200px] h-[90px]"},null,8,he))),256)):_("",!0)]}),_:1},8,["class"]),(V=s.value)!=null&&V.images?(i(),m("div",be,f(s.value.images[0]),1)):_("",!0)]),c($,{type:"submit",label:"Submit",class:"mt-3"})],40,oe)]),c(j)]}),_:1})}}};export{Ve as default};
