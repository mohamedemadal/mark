import{p as U,r as a,u as C,H as P,U as $,o as D,b as _,d as p,e as f,C as F,w as N,h as n,L as j,i as m,f as x,t as y,n as S,j as z}from"./index-9b6dcbe1.js";import{r as E,v as I,p as M,a as H}from"./filepond-plugin-image-preview.esm-229deca5.js";import{s as L}from"./editor.esm-fdcfe090.js";import{p as Q}from"./filepond-plugin-file-encode.esm-b0bc8408.js";const R={class:"flex justify-center"},q=["onSubmit"],A=n("h2",{class:"pb-4 text-center va-text-bold"}," Update Page ",-1),G={class:""},J=n("label",{for:"password"},"Title ",-1),K={key:0,class:"mt-1 mb-5 text-red-500"},O={class:""},W=n("label",{for:"password"},"Description ",-1),X={key:0,class:"mt-1 mb-5 text-red-500"},se={setup(Y){E(Q),I(H,M);const w=U(),s=a({title:"",description:""});a(null);const B=a([]),T=C(),V=a(0);a(""),a([]);const o=a({});a(0),a(0);const g=a([]);a([{name:"en",value:"gb"},{name:"ar",value:"sa"},{name:"az",value:"az"},{name:"ge",value:"ge"},{name:"ru",value:"ru"},{name:"tr",value:"tr"}]);const u=a("gb"),l=a(""),k=()=>{const e=new FormData;for(let t=0;t<g.value.length;t++)e.append("images[]",g.value[t]);e.append("title",s.value.title),e.append("description",s.value.description),_.defaults.headers.common.local=u.value,_.post(`/api/pages/${o.value.id}/update`,e).then(t=>{l.value=[],V.value=1;let i=o.value.media;o.value=t.data.page,o.value.media=i,w.add({severity:"success",summary:"Successful",detail:"Page Updated",life:3e3})}).catch(t=>{l.value=t.response.data.errors,console.log(l.value)})};return P(u,async(e,t)=>{var i,d,r,c;console.log(o.value),s.value.title=((i=o.value)==null?void 0:i.title[e])==null?"":(d=o.value)==null?void 0:d.title[e],s.value.description=((r=o.value)==null?void 0:r.description[e])==null?"":(c=o.value)==null?void 0:c.description[e]}),$(()=>B.value),D(()=>{_.get(`/api/pages/${T.params.id}`).then(e=>{s.value.title=e.data.page.title[u.value],s.value.description=e.data.page.description[u.value],o.value=e.data.page})}),(e,t)=>{const i=p("InputText"),d=p("Button"),r=p("Toast"),c=p("va-card");return f(),F(c,{class:"card"},{default:N(()=>{var h,b;return[n("div",R,[n("form",{onSubmit:j(k,["prevent"]),class:"flex flex-col w-3/4 py-9"},[A,n("div",G,[J,m(i,{modelValue:s.value.title,"onUpdate:modelValue":t[0]||(t[0]=v=>s.value.title=v),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(h=l.value)!=null&&h.title?(f(),x("div",K,y(l.value.title[0]),1)):S("",!0)]),n("div",O,[W,m(z(L),{modelValue:s.value.description,"onUpdate:modelValue":t[1]||(t[1]=v=>s.value.description=v),editorStyle:"height: 150px",class:"my-2"},null,8,["modelValue"]),(b=l.value)!=null&&b.description?(f(),x("div",X,y(l.value.description[0]),1)):S("",!0)]),m(d,{type:"submit",label:"Submit",class:"mt-3"})],40,q)]),m(r)]}),_:1})}}};export{se as default};
