import{p as J,r as s,s as Q,o as X,v as Z,d as u,e as y,f as x,h as i,i as t,w as n,b as c,m as U,t as I,n as O,K as R}from"./index-9b6dcbe1.js";const ee={class:"grid"},le={class:"col-12"},te={class:"my-2"},se={class:"flex flex-column md:flex-row md:justify-between md:align-items-center"},ae=i("h5",{class:"m-0"},"Manage roles",-1),oe={class:"block mt-2 md:mt-0 p-input-icon-left"},ne=i("i",{class:"pi pi-search"},null,-1),ie={class:"flex align-items-center justify-content-center"},de=i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ue={key:0},re={class:"field mb-5"},ce=i("label",{for:"last"},"Name ",-1),pe={key:0,class:"p-invalid"},me={class:"card flex justify-content-center"},ve={class:"field mb-5"},fe=i("label",{for:"last"},"Name ",-1),be={class:"card flex justify-content-center"},ge={setup(_e){const V=J();s(null);const v=s(!0),a=s({name:"",permissions:[]}),h=s([]),S=s([]),g=s(!1),r=s(!1);s(!1);const p=s(!1),N=s({}),T=s(null),D=s(null),f=s({}),m=s(!1),P=s([]),b=s(Number);s([{name:"New York",code:"NY"},{name:"Rome",code:"RM"},{name:"London",code:"LDN"},{name:"Istanbul",code:"IST"},{name:"Paris",code:"PRS"}]),s([{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}]),Q(()=>{z()});const w=()=>{c.get("/api/roles/index").then(d=>{v.value=!1,S.value=d.data.roles}),c.get("/api/permissions/index").then(d=>{v.value=!1,h.value=d.data.permissions})};X(()=>{w()});const $=()=>{N.value={},m.value=!1,r.value=!0},L=()=>{r.value=!1,m.value=!1},B=()=>{c.post(`/api/roles/update/${b.value}`,a.value).then(d=>{})},F=()=>{const d=new FormData;console.log(P.value),d.append("name",a.value.name),d.append("permissions",P.value),c.post("api/roles/create",a.value).then(e=>{w(),r.value=!r.value,V.add({severity:"success",summary:"Successful",detail:"role create",life:3e3})}).catch(e=>{console.log(e)})},j=d=>{b.value=d,g.value=!0,c.get(`/api/roles/show/${d}`).then(e=>{v.value=!1,a.value.name=e.data.role.name;for(let o=0;o<e.data.role.permissions.length;o++)a.value.permissions.push(e.data.role.permissions[o].pivot.permission_id)})},K=d=>{b.value=d,p.value=!0},q=()=>{D.value.exportCSV()},Y=()=>{c.post(`api/roles/delete/${b.value}`),w(),p.value=!1,V.add({severity:"success",summary:"Successful",detail:"Roles Deleted",life:3e3})},z=()=>{f.value={global:{value:null,matchMode:Z.CONTAINS}}};return(d,e)=>{const o=u("Button"),A=u("Toolbar"),E=u("Toast"),k=u("InputText"),_=u("Column"),W=u("DataTable"),C=u("Dialog"),M=u("MultiSelect"),G=u("va-card");return y(),x("div",ee,[i("div",le,[t(G,{class:"card"},{default:n(()=>[t(A,{class:"mb-4"},{start:n(()=>[i("div",te,[t(o,{label:"New",icon:"pi pi-plus",class:"new mr-2",onClick:$})])]),end:n(()=>[t(o,{label:"Export",icon:"pi pi-upload",class:"new",onClick:e[0]||(e[0]=l=>q())})]),_:1}),t(E),t(W,{ref_key:"dt",ref:D,selection:T.value,"onUpdate:selection":e[2]||(e[2]=l=>T.value=l),value:S.value,loading:v.value,"data-key":"id",paginator:!0,rows:10,filters:f.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:n(()=>[i("div",se,[ae,i("span",oe,[ne,t(k,{modelValue:f.value.global.value,"onUpdate:modelValue":e[1]||(e[1]=l=>f.value.global.value=l),placeholder:"Search..."},null,8,["modelValue"])])])]),default:n(()=>[t(_,{"selection-mode":"multiple","header-style":"width: 3rem"}),t(_,{field:"id",header:"Id",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(l=>[U(I(l.data.id),1)]),_:1}),t(_,{field:"name",header:"Name",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(l=>[U(I(l.data.name),1)]),_:1}),t(_,{"header-style":"min-width:10rem;"},{body:n(l=>[t(o,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:H=>j(l.data.id)},null,8,["onClick"]),t(o,{icon:"pi pi-trash",class:"delete mt-2",onClick:H=>K(l.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","loading","filters"]),t(C,{visible:p.value,"onUpdate:visible":e[4]||(e[4]=l=>p.value=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[t(o,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[3]||(e[3]=l=>p.value=!1)}),t(o,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:Y})]),default:n(()=>[i("div",ie,[de,N.value?(y(),x("span",ue,"Are you sure you want to delete the selected products?")):O("",!0)])]),_:1},8,["visible"]),t(C,{visible:r.value,"onUpdate:visible":e[7]||(e[7]=l=>r.value=l),style:{width:"450px"},header:"Create roles",modal:!0,class:"p-fluid"},{footer:n(()=>[t(o,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:L}),t(o,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:F})]),default:n(()=>[i("div",re,[ce,t(k,{class:R(["mt-3",{"p-invalid":m.value&&!a.value.last_name}]),id:"last",modelValue:a.value.name,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.name=l),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),m.value&&!a.value.last_name?(y(),x("small",pe,"Last Name is required.")):O("",!0)]),i("div",me,[t(M,{modelValue:a.value.permissions,"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.permissions=l),display:"chip","option-value":"id",options:h.value,optionLabel:"name",placeholder:"Select Permissions",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"]),t(C,{visible:g.value,"onUpdate:visible":e[10]||(e[10]=l=>g.value=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[t(o,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:L}),t(o,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:B})]),default:n(()=>[i("div",ve,[fe,t(k,{class:R(["mt-3 w-full",{"p-invalid":m.value&&!a.value.last_name}]),id:"last",modelValue:a.value.name,"onUpdate:modelValue":e[8]||(e[8]=l=>a.value.name=l),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"])]),i("div",be,[t(M,{modelValue:a.value.permissions,"onUpdate:modelValue":e[9]||(e[9]=l=>a.value.permissions=l),"option-value":"id",options:h.value,optionLabel:"name",placeholder:"Select roles",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"])]),_:1})])])}}};export{ge as default};
