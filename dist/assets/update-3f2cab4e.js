import{q as M,r as s,p as $,u as K,o as P,b as h,d as n,e as i,C as H,w as U,h as l,L as J,i as d,f as c,t as g,n as v,k as S,F as B,K as Q,m as W}from"./index-9b6dcbe1.js";const X={class:"flex justify-center"},Y=["onSubmit"],Z={class:"pb-4 text-center va-text-bold"},ee=W(" Update Offer "),te={class:""},ae=l("label",{for:"password"},"Title ",-1),se=l("p",null,null,-1),le={key:0,class:"mt-1 mb-5 text-red-500"},oe={class:""},ue=l("label",{for:"password"},"Price ",-1),ne={key:0,class:"mt-1 mb-5 text-red-500"},ie=["src"],re=["src"],de={key:0,class:"mt-1 mb-5 text-red-500"},ce={class:"flex mt-4"},me={class:"flex items-center"},pe=l("label",{class:"mx-2"}," status ",-1),_e={setup(ve){const F=M();s("");const I=$();s("ar");const a=s({number:"",Title:"",status:!0,price:"",images:[]}),N=K(),R=s(0),x=s(""),f=s([]),u=s(""),r=s({});s(0),s(0);const m=s([]),C=s([{name:"English",value:"English"},{name:"Arabic",value:"Arabic"},{name:"Azerbaijan",value:"Azerbaijan"},{name:"Georgia",value:"Georgia"},{name:"Russia",value:"Russia"},{name:"Turkey",value:"Turkey"}]),p=s("English"),E=e=>{console.log(e.files[0]),m.value=e.files,x.value=e.files;for(let t=0;t<m.value.length;t++)f.value.push(URL.createObjectURL(m.value[t]));console.log(f.value)},L=()=>{const e=new FormData;for(let t=0;t<m.value.length;t++)e.append("images[]",m.value[t]);e.append("title",a.value.Title),a.value.status==!0&&(a.value.status=1,e.append("status",a.value.status)),a.value.status==!1&&(a.value.status=0,e.append("status",a.value.status)),e.append("price",a.value.price),e.append("lang",p.value),h.defaults.headers.common.local=p.value,h.post(`/api/offers/${r.value.id}/update`,e).then(t=>{I.add({severity:"success",summary:"Successful",detail:"Offer update",life:3e3}),F.go(-1),console.log("asd"),u.value=[],R.value=1;let _=r.value.media;r.value=t.data.offer,r.value.media=_}).catch(t=>{u.value=t.response.data.errors,console.log(u.value)})};return P(()=>{h.get(`/api/offers/${N.params.id}`).then(e=>{e.data.offer.status==1&&(a.value.status=!0),e.data.offer.status==0&&(a.value.status=!1),console.log(e.data.offer.number),a.value.price=e.data.offer.price,p.value=e.data.offer.lang,a.value.Title=e.data.offer.title,r.value=e.data.offer})}),(e,t)=>{const _=n("Dropdown"),j=n("InputText"),A=n("InputNumber"),D=n("FileUpload"),z=n("InputSwitch"),O=n("Button"),q=n("Toast"),G=n("va-card");return i(),H(G,{class:"card"},{default:U(()=>{var w,y,V;return[l("div",X,[l("form",{onSubmit:J(L,["prevent"]),class:"flex flex-col w-3/4 py-9"},[l("h2",Z,[ee,d(_,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),editable:"",options:C.value,optionLabel:"name","option-value":"value",class:"w-36 mx-3 mx-10"},null,8,["modelValue","options"])]),l("div",te,[ae,se,d(j,{modelValue:a.value.Title,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.Title=o),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(w=u.value)!=null&&w.title?(i(),c("div",le,g(u.value.title[0]),1)):v("",!0)]),l("div",oe,[ue,d(A,{modelValue:a.value.price,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.price=o),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(y=u.value)!=null&&y.price?(i(),c("div",ne,g(u.value.price[0]),1)):v("",!0)]),l("div",null,[d(D,{id:"password",onUploader:E,accept:"image/*",required:"true",multiple:!1,"custom-upload":!0,autofocus:"",class:Q({"p-invalid":e.submitted})},{empty:U(()=>{var o,T,k;return[x.value!=""?(i(!0),c(B,{key:0},S(f.value,b=>(i(),c("img",{src:b,class:"w-[200px] h-[90px] mb-3"},null,8,ie))),256)):(T=(o=r.value)==null?void 0:o.media)!=null&&T.length?(i(!0),c(B,{key:1},S((k=r.value)==null?void 0:k.media,b=>(i(),c("img",{src:b.original_url,class:"w-[200px] h-[90px]"},null,8,re))),256)):v("",!0)]}),_:1},8,["class"]),(V=u.value)!=null&&V.images?(i(),c("div",de,g(u.value.images[0]),1)):v("",!0)]),l("div",ce,[l("div",me,[pe,d(z,{modelValue:a.value.status,"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.status=o)},null,8,["modelValue"])])]),d(O,{type:"submit",label:"Submit",class:"mt-3"})],40,Y)]),d(q)]}),_:1})}}};export{_e as default};
